{% extends "../layout.njk" %}

{% set columnClasses = "govuk-grid-column-full" %}

{% block questions %}
  <div class="govuk-grid-row">

    <div>
      <h1 class="govuk-heading-l">{{page.title}}</h1>
      <p>Select any prison case notes that will help Approved Premises (AP) managers understand factors that may help with the person's risk management in an AP. </p>
      <p>Adjudications from the person's current sentence and ACCT (Assessment, Care in Custody and Teamwork) information will be sent automatically.</p>
    </div>

    <nav class="moj-sub-navigation" aria-label="Sub navigation">

      <ul class="moj-sub-navigation__list">
        <li class="moj-sub-navigation__item">
          <a class="moj-sub-navigation__link"  aria-current="page" href="prison-behaviours.html">Prison case notes</a>
        </li>

        <li class="moj-sub-navigation__item">
          <a class="moj-sub-navigation__link" href="prison-adjudications.html">Adjudications</a>
        </li>

        <li class="moj-sub-navigation__item">
          <a class="moj-sub-navigation__link"  href="prison-acct.html">ACCT</a>
        </li>
      </ul>
    </nav>
  </div>

  <div class="govuk-column-full-width panel" id="caseNotes">
    <table class="govuk-table">
      <caption class="govuk-table__caption govuk-table__caption--m">Prison case notes</caption>

      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">Select</th>
          <th scope="col" class="govuk-table__header">Created</th>
          <th scope="col" class="govuk-table__header">Comments</th>
        </tr>
      </thead>

      <tbody class="govuk-table__body">
        {% for caseNote in page.caseNotes %}
          <tr class="govuk-table__row">
            <td scope="row" class="govuk-table__cell">{{ page.checkBoxForCaseNoteId(caseNote.id) | safe }}</td>
            <td scope="row" class="govuk-table__cell">{{ formatDate(caseNote.createdAt) }}</td>
            <td scope="row" class="govuk-table__cell">
              <p>
                <strong>Type: {{caseNote.type}}: {{caseNote.subType}}</strong>
              </p>
              <p>{{caseNote.note}}</p>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {{ applyTextarea({
      fieldName: 'moreDetail',
      label: {
        text: page.questions.moreDetailsQuestion,
        classes: "govuk-label--s"
      },
      hint: {
        text: "Provide details (optional)"
      }
    }) }}
  </div>

{% endblock %}
