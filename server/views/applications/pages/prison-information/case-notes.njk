{%- from "moj/components/sub-navigation/macro.njk" import mojSubNavigation -%}
{% from "../../../components/formFields/form-page-textarea/macro.njk" import formPageTextarea %}
{% from "../../../partials/prisonInformationTable.njk" import prisonInformationTable %}

{% set title = "Select prison case notes" %}

{% extends "../layout.njk" %}

{% set columnClasses = "govuk-grid-column-full" %}

{% set caseNotes %}
<table class="govuk-table">
  <caption class="govuk-table__caption govuk-table__caption--m">Prison case notes</caption>

  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Select</th>
      <th scope="col" class="govuk-table__header">Created</th>
      <th scope="col" class="govuk-table__header">Comments</th>
    </tr>
  </thead>

  <tbody class="govuk-table__body">
    {% for caseNote in page.caseNotes %}
      <tr class="govuk-table__row">
        <td scope="row" class="govuk-table__cell">{{ page.checkBoxForCaseNoteId(caseNote.id) | safe }}</td>
        <td scope="row" class="govuk-table__cell">{{ formatDate(caseNote.createdAt) }}</td>
        <td scope="row" class="govuk-table__cell">
          <p>
            <strong>Type: {{caseNote.type}}: {{caseNote.subType}}</strong>
          </p>
          <p>{{caseNote.note}}</p>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endset %}

{% block questions %}
  <div class="govuk-grid-row">
    <div>
      <h1 class="govuk-heading-l">{{page.title}}</h1>
      <p>This information is imported from NOMIS</p>
      <p>Select any prison case notes that will help Approved Premises (AP) managers understand factors that may help with the person's risk management in an AP. </p>
      <p>Adjudications from the person's current sentence and ACCT (Assessment, Care in Custody and Teamwork) information will be sent automatically.</p>
    </div>

    {{prisonInformationTable(caseNotes, page.body.adjudications, page.body.acctAlerts)}}
  </div>
{% endblock %}
