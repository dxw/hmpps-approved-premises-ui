{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}

{% extends "../layout.njk" %}

{% block questions %}

  <h1 class="govuk-heading-l">{{ page.title }}</h1>

  {{ govukCheckboxes({
      name: "cctvHistory",
      errorMessage: errors.cctvHistory,
      fieldset: {
        legend: {
          text: page.questions.cctvHistory,
          classes: "govuk-fieldset__legend--m"
        }
      },
      items: page.cctvHistoryItems()
    }) }}

  {% set yesDetails %}
  {{
    applyTextarea(
      {
        fieldName: "cctvIntelligenceDetails",
        type: "textarea",
        spellcheck: false,
        label: {
          text: page.questions.cctvIntelligenceDetails
        }
      },
      fetchContext()
    )
  }}
  {% endset -%}

  {{
    applyRadios(
      {
        fieldName: "cctvIntelligence",
        hint: {
          text: "For example, DOS, JEXU or NSD."
        },
        fieldset: {
          legend: {
            text: page.questions.cctvIntelligence,
            classes: "govuk-fieldset__legend--m"
          }
        },
        items: [
          {
            value: "yes",
            text: "Yes",
            conditional: {
              html: yesDetails
            }
          },
          {
            text: "No",
            value: "no"
          }
        ]
      },
      fetchContext()
    )
  }}

  <h2 class="govuk-heading-s">{{ page.questions.cctvNotes }}</h2>

  {{
    applyTextarea(
      {
        fieldName: "cctvNotes"
      },
      fetchContext()
    )
  }}

{% endblock %}
