{% extends "../partials/layout.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{%- from "moj/components/sub-navigation/macro.njk" import mojSubNavigation -%}

{% set pageTitle = applicationName + " - " + pageHeading  %}
{% set mainClasses = "app-container govuk-body assessments--index" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <h1 class="govuk-heading-l">{{ pageHeading }}</h1>

      {% if UserUtils.hasRole(user, 'workflow_manager') %}
        {{ mojSubNavigation({
          label: 'Sub navigation',
          items: [{
            text: 'All Assessments',
            href: paths.assessments.index({}),
            active: (type !== 'myAssessments')
          },
          {
            text: 'My Assessments',
            href: paths.assessments.index({}) + '?type=myAssessments',
            active: (type === 'myAssessments')
          }]
        }) }}

        {% if type === 'myAssessments' %}
          {% include './_assessmentsForUser.njk' %}
        {% else %}
          {% include './_assessmentAllocationList.njk' %}
        {% endif %}
      {% else %}
        {% include './_assessmentsForUser.njk' %}
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block extraScripts %}
  <script type="text/javascript" nonce="{{ cspNonce }}">
    window
      .MOJFrontend
      .initAll()
  </script>
{% endblock %}
